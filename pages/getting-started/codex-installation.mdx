---
title: 安装和配置
description: OpenAI Codex 的安装和配置指南
---

import { Callout, Tabs } from 'nextra/components'

# OpenAI Codex 安装和配置指南

本指南将帮助你配置 OpenAI Codex 以使用 claude-code.club AI API 服务。

## 1. 安装 Codex CLI

使用以下方式之一全局安装 Codex CLI：

<Tabs items={['npm', 'Homebrew (macOS)']}>
  <Tabs.Tab>
    ```bash
    npm install -g @openai/codex
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash
    brew install --cask codex
    ```
  </Tabs.Tab>
</Tabs>

<Callout type="info">
  更多安装选项和详细说明，请参考 [OpenAI Codex 官方文档](https://github.com/openai/codex)。
</Callout>

## 2. 配置 Codex

配置 Codex 需要修改两个文件：`~/.codex/config.toml` 和 `~/.codex/auth.json`。

### 配置文件 config.toml

在 `~/.codex/config.toml` 文件**开头**添加以下配置：

```toml
model_provider = "crs"
model = "gpt-5.1-codex-max"
model_reasoning_effort = "high"
disable_response_storage = true
preferred_auth_method = "apikey"

[model_providers.crs]
name = "crs"
base_url = "https://claude-code.club/openai"
wire_api = "responses"
requires_openai_auth = true
env_key = "OPENAI_API_KEY"
```

### 认证文件 auth.json

在 `~/.codex/auth.json` 文件中配置：

```json
{
  "OPENAI_API_KEY": null
}
```

<Callout type="info">
  将 `OPENAI_API_KEY` 设置为 `null`，然后通过环境变量设置实际的 API 密钥。
</Callout>

## 3. 配置环境变量

设置 `OPENAI_API_KEY` 环境变量为您的 API 密钥（格式如 `cr_xxxxxxxxxx`）。

<Tabs items={['macOS / Linux', 'Windows (PowerShell)', 'Windows (CMD)']}>
  <Tabs.Tab>
    **临时生效（当前窗口）：**
    ```bash
    export OPENAI_API_KEY=cr_xxxxxxxxxx
    ```

    **永久生效（推荐）：**

    对于 zsh（macOS 默认）：
    ```bash
    echo 'export OPENAI_API_KEY="cr_xxxxxxxxxx"' >> ~/.zshrc
    source ~/.zshrc
    ```

    对于 bash：
    ```bash
    echo 'export OPENAI_API_KEY="cr_xxxxxxxxxx"' >> ~/.bashrc
    source ~/.bashrc
    ```

    <Callout type="info">
      **注意：** 设置后，你可能需要重新打开终端窗口，或者手动执行 `source ~/.zshrc` (zsh) / `source ~/.bashrc` (bash) 使配置生效。
    </Callout>
  </Tabs.Tab>
  <Tabs.Tab>
    **当前会话生效：**
    ```powershell
    $env:OPENAI_API_KEY="cr_xxxxxxxxxx"
    ```

    **永久生效：**
    ```powershell
    [System.Environment]::SetEnvironmentVariable('OPENAI_API_KEY', 'cr_xxxxxxxxxx', 'User')
    ```
    *设置后需要重启 PowerShell 窗口。*
  </Tabs.Tab>
  <Tabs.Tab>
    **当前会话生效：**
    ```cmd
    set OPENAI_API_KEY=cr_xxxxxxxxxx
    ```

    **永久生效：**
    ```cmd
    setx OPENAI_API_KEY "cr_xxxxxxxxxx"
    ```
    *设置后需要重启 CMD 窗口。*
  </Tabs.Tab>
</Tabs>

<Callout type="warning">
  请将 `cr_xxxxxxxxxx` 替换为您从 claude-code.club 获取的实际 API 密钥。
</Callout>

## 4. 验证配置

配置完成后，启动 Codex 验证是否配置成功：

```bash
codex
```

<Callout type="success">
  **恭喜！**
  你已经成功配置了 OpenAI Codex。现在可以开始使用 AI 辅助编码功能了。
</Callout>

## 常见问题

**Q: 提示 API Key 无效？**
A: 请检查环境变量是否配置正确，并确保 `~/.codex/auth.json` 中的 `OPENAI_API_KEY` 设置为 `null`。

**Q: 如何获取 API 密钥？**
A: 请访问 [获取 API Key](/getting-started/get-api-key) 页面了解如何获取密钥。
